/**
 * Sistema de traducciones para Soplos Linux Startpage
 */

// Traducciones
const translations = {
  es: {
    title: "Busca con Soplos Linux",
    searchPlaceholder: "Buscar en Google",
    searchButton: "Buscar",
    footer: "&copy; 2025 Soplos Linux",
    homeLink: "Sitio Web",
    wikiLink: "Wiki",
    forumLink: "Foros",
    githubLink: "GitHub",
    donateLink: "Donar",
    
    // Sitios frecuentes
    "frequent-sites-title": "Sitios frecuentes",
    "modal-title": "Añadir sitio frecuente",
    "site-name-label": "Nombre:",
    "site-url-label": "URL:",
    "site-icon-label": "Icono:",
    "save-site-btn": "Guardar",
    "site-name-placeholder": "Nombre del sitio",
    "site-url-placeholder": "https://ejemplo.com",
    "add-new-site": "Añadir nuevo sitio",
    "fields-required": "Por favor completa todos los campos",
    "site-added-ok": "Sitio \"{name}\" añadido correctamente",
    "site-added-error": "Error al guardar el sitio. Inténtalo de nuevo.",
    "delete-confirmation": "¿Eliminar \"{name}\" de tus favoritos?",
    "delete-error": "Error al eliminar el sitio"
  },
  en: {
    title: "Search with Soplos Linux",
    searchPlaceholder: "Search on Google",
    searchButton: "Search",
    footer: "&copy; 2025 Soplos Linux",
    homeLink: "Website",
    wikiLink: "Wiki",
    forumLink: "Forums",
    githubLink: "GitHub",
    donateLink: "Donate",
    
    // Sitios frecuentes
    "frequent-sites-title": "Frequent sites",
    "modal-title": "Add frequent site",
    "site-name-label": "Name:",
    "site-url-label": "URL:",
    "site-icon-label": "Icon:",
    "save-site-btn": "Save",
    "site-name-placeholder": "Site name",
    "site-url-placeholder": "https://example.com",
    "add-new-site": "Add new site",
    "fields-required": "Please complete all fields",
    "site-added-ok": "Site \"{name}\" added successfully",
    "site-added-error": "Error saving the site. Please try again.",
    "delete-confirmation": "Remove \"{name}\" from your favorites?",
    "delete-error": "Error deleting the site"
  },
  pt: {
    title: "Pesquise com Soplos Linux",
    searchPlaceholder: "Pesquisar no Google",
    searchButton: "Pesquisar",
    footer: "&copy; 2025 Soplos Linux",
    homeLink: "Site",
    wikiLink: "Wiki",
    forumLink: "Fóruns",
    githubLink: "GitHub",
    donateLink: "Doar",
    
    // Sitios frecuentes
    "frequent-sites-title": "Sites frequentes",
    "modal-title": "Adicionar site frequente",
    "site-name-label": "Nome:",
    "site-url-label": "URL:",
    "site-icon-label": "Ícone:",
    "save-site-btn": "Guardar",
    "site-name-placeholder": "Nome do site",
    "site-url-placeholder": "https://exemplo.com",
    "add-new-site": "Adicionar novo site",
    "fields-required": "Por favor, preencha todos os campos",
    "site-added-ok": "Site \"{name}\" adicionado com sucesso",
    "site-added-error": "Erro ao salvar o site. Por favor tente novamente.",
    "delete-confirmation": "Remover \"{name}\" dos seus favoritos?",
    "delete-error": "Erro ao excluir o site"
  },
  fr: {
    title: "Recherchez avec Soplos Linux",
    searchPlaceholder: "Rechercher sur Google",
    searchButton: "Rechercher",
    footer: "&copy; 2025 Soplos Linux",
    homeLink: "Site Web",
    wikiLink: "Wiki",
    forumLink: "Forums",
    githubLink: "GitHub",
    donateLink: "Faire un don",
    
    // Sitios frecuentes
    "frequent-sites-title": "Sites fréquents",
    "modal-title": "Ajouter un site fréquent",
    "site-name-label": "Nom:",
    "site-url-label": "URL:",
    "site-icon-label": "Icône:",
    "save-site-btn": "Enregistrer",
    "site-name-placeholder": "Nom du site",
    "site-url-placeholder": "https://exemple.com",
    "add-new-site": "Ajouter un nouveau site",
    "fields-required": "Veuillez compléter tous les champs",
    "site-added-ok": "Site \"{name}\" ajouté avec succès",
    "site-added-error": "Erreur lors de l'enregistrement du site. Veuillez réessayer.",
    "delete-confirmation": "Supprimer \"{name}\" de vos favoris?",
    "delete-error": "Erreur lors de la suppression du site"
  },
  de: {
    title: "Suchen Sie mit Soplos Linux",
    searchPlaceholder: "Suchen auf Google",
    searchButton: "Suchen",
    footer: "&copy; 2025 Soplos Linux",
    homeLink: "Webseite",
    wikiLink: "Wiki",
    forumLink: "Foren",
    githubLink: "GitHub",
    donateLink: "Spenden",
    
    // Sitios frecuentes
    "frequent-sites-title": "Häufige Seiten",
    "modal-title": "Häufig besuchte Seite hinzufügen",
    "site-name-label": "Name:",
    "site-url-label": "URL:",
    "site-icon-label": "Symbol:",
    "save-site-btn": "Speichern",
    "site-name-placeholder": "Name der Website",
    "site-url-placeholder": "https://beispiel.de",
    "add-new-site": "Neue Seite hinzufügen",
    "fields-required": "Bitte füllen Sie alle Felder aus",
    "site-added-ok": "Seite \"{name}\" erfolgreich hinzugefügt",
    "site-added-error": "Fehler beim Speichern der Seite. Bitte versuchen Sie es erneut.",
    "delete-confirmation": "\"{name}\" aus Ihren Favoriten entfernen?",
    "delete-error": "Fehler beim Löschen der Seite"
  },
  it: {
    title: "Cerca con Soplos Linux",
    searchPlaceholder: "Cerca su Google",
    searchButton: "Cerca",
    footer: "&copy; 2025 Soplos Linux",
    homeLink: "Sito Web",
    wikiLink: "Wiki",
    forumLink: "Forum",
    githubLink: "GitHub",
    donateLink: "Donare",
    
    // Sitios frecuentes
    "frequent-sites-title": "Siti frequenti",
    "modal-title": "Aggiungi sito frequente",
    "site-name-label": "Nome:",
    "site-url-label": "URL:",
    "site-icon-label": "Icona:",
    "save-site-btn": "Salva",
    "site-name-placeholder": "Nome del sito",
    "site-url-placeholder": "https://esempio.it",
    "add-new-site": "Aggiungi nuovo sito",
    "fields-required": "Completa tutti i campi",
    "site-added-ok": "Sito \"{name}\" aggiunto con successo",
    "site-added-error": "Errore nel salvare il sito. Riprova.",
    "delete-confirmation": "Rimuovere \"{name}\" dai tuoi preferiti?",
    "delete-error": "Errore nella cancellazione del sito"
  },
  ro: {
    title: "Caută cu Soplos Linux",
    searchPlaceholder: "Caută pe Google",
    searchButton: "Caută",
    footer: "&copy; 2025 Soplos Linux",
    homeLink: "Site Web",
    wikiLink: "Wiki",
    forumLink: "Forumuri",
    githubLink: "GitHub",
    donateLink: "Donează",
    
    // Sitios frecuentes
    "frequent-sites-title": "Site-uri frecvente",
    "modal-title": "Adaugă site frecvent",
    "site-name-label": "Nume:",
    "site-url-label": "URL:",
    "site-icon-label": "Pictogramă:",
    "save-site-btn": "Salvează",
    "site-name-placeholder": "Numele site-ului",
    "site-url-placeholder": "https://exemplu.ro",
    "add-new-site": "Adaugă site nou",
    "fields-required": "Completează toate câmpurile",
    "site-added-ok": "Site-ul \"{name}\" a fost adăugat cu succes",
    "site-added-error": "Eroare la salvarea site-ului. Încearcă din nou.",
    "delete-confirmation": "Elimini \"{name}\" din favorite?",
    "delete-error": "Eroare la ștergerea site-ului"
  },
  ru: {
    title: "Поиск с Soplos Linux",
    searchPlaceholder: "Искать в Google",
    searchButton: "Поиск",
    footer: "&copy; 2025 Soplos Linux",
    homeLink: "Веб-сайт",
    wikiLink: "Вики",
    forumLink: "Форумы",
    githubLink: "GitHub",
    donateLink: "Пожертвовать",
    
    // Sitios frecuentes
    "frequent-sites-title": "Частые сайты",
    "modal-title": "Добавить частый сайт",
    "site-name-label": "Имя:",
    "site-url-label": "URL:",
    "site-icon-label": "Иконка:",
    "save-site-btn": "Сохранить",
    "site-name-placeholder": "Название сайта",
    "site-url-placeholder": "https://пример.рф",
    "add-new-site": "Добавить новый сайт",
    "fields-required": "Пожалуйста, заполните все поля",
    "site-added-ok": "Сайт \"{name}\" успешно добавлен",
    "site-added-error": "Ошибка при сохранении сайта. Пожалуйста, попробуйте снова.",
    "delete-confirmation": "Удалить \"{name}\" из избранного?",
    "delete-error": "Ошибка при удалении сайта"
  }
};

// Cambiar idioma
function changeLanguage(lang) {
  document.documentElement.lang = lang;
  document.getElementById("title").innerText = translations[lang].title;
  
  // Actualizar placeholder con el motor actual (no hardcodeado)
  const searchInput = document.getElementById("search-input");
  if (searchInput && window.searchEngines && window.currentEngine) {
    const currentEngineName = window.searchEngines[window.currentEngine]?.name || "Google";
    searchInput.placeholder = translations[lang].searchPlaceholder.replace("Google", currentEngineName);
  } else {
    // Fallback si no está disponible la info del motor
    document.getElementById("search-input").placeholder = translations[lang].searchPlaceholder;
  }
  
  document.getElementById("search-button").value = translations[lang].searchButton;
  document.getElementById("footer").innerHTML = translations[lang].footer;
  
  // Actualizar los textos de los enlaces del sitio
  document.getElementById("home-link").innerText = translations[lang].homeLink;
  document.getElementById("tyron-link").innerText = translations[lang].wikiLink;
  document.getElementById("forum-link").innerText = translations[lang].forumLink;
  document.getElementById("github-link").innerText = translations[lang].githubLink;
  document.getElementById("donate-link").innerText = translations[lang].donateLink;
  
  // Actualizar el título de sitios frecuentes
  document.getElementById("frequent-sites-title").innerText = translations[lang]["frequent-sites-title"];
  
  // Actualizar textos del modal
  document.getElementById("modal-title").innerText = translations[lang]["modal-title"];
  document.getElementById("site-name-label").innerText = translations[lang]["site-name-label"];
  document.getElementById("site-url-label").innerText = translations[lang]["site-url-label"];
  document.getElementById("site-icon-label").innerText = translations[lang]["site-icon-label"];
  document.getElementById("save-site-btn").innerText = translations[lang]["save-site-btn"];
  
  // Actualizar placeholders
  document.getElementById("site-name").placeholder = translations[lang]["site-name-placeholder"];
  document.getElementById("site-url").placeholder = translations[lang]["site-url-placeholder"];
  
  // Guardar preferencia en localStorage
  localStorage.setItem('soplosStartPageLang', lang);
  
  // Notificar que se ha cambiado el idioma para otros componentes
  document.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang } }));
  
  // Forzar actualización del motor de búsqueda para sincronizar placeholder
  if (typeof setSearchEngine === 'function' && window.currentEngine) {
    setTimeout(() => {
      setSearchEngine(window.currentEngine);
    }, 10);
  }
}

// Helper para obtener una cadena traducida
function getTranslatedString(key, lang, replacements) {
  lang = lang || localStorage.getItem('soplosStartPageLang') || 'es';
  let text = translations[lang][key] || key;
  
  // Realizar reemplazos si existen
  if (replacements) {
    for (const [placeholder, value] of Object.entries(replacements)) {
      text = text.replace(`{${placeholder}}`, value);
    }
  }
  
  return text;
}
